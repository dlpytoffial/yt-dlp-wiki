# Youtube

## HOW TO PO-TOKEN

Proof of Origin (PO) token is a token that YouTube requires on some clients to request video playback. Without it, the video formats may return a 403 error, block your IP or get your account blocked.

This token is generated by BotGuard (web) / DroidGuard (android) to attest the requests are coming from a real client.

The PO Token is linked to a visitor ID, which appears to represent a session on YouTube. This visitor ID is found in the `VISITOR_INFO1_LIVE` cookie, or in a visitorData value which is sent in Innertube requests. 

### Manually acquiring a PO Token from a browser

This process goes through manually obtaining a PO Token generated on YouTube in a web browser, and then manually passing that to yt-dlp via extractor arguments. It is best to leave yt-dlp to handle the visitor ID/visitorData through cookies.

#### If logged out

1. Open a browser and go to a video on YouTube Embedded (e.g. https://www.youtube.com/embed/aqz-KE-bpKQ)
2. Open the developer console (F12) and go to the "Network" tab, and filter by `v1/player`
3. Click the video to play and a player request will appear in the network tab
4. In the request payload JSON, find the PO Token at `serviceIntegrityDimensions.poToken` and save that value. This is the PO Token.
5. Export cookies from the browser
6. Pass the PO Token to yt-dlp with `--extractor-args youtube:player-client=web,default;po_token=web:PO_TOKEN_VALUE_HERE`, cookies with `--cookies COOKIES_FILE` (or `--cookies-from-browser`)

#### If logged in

Since YouTube rotates cookies on open YouTube browser tabs as a security measure, you will need to export cookies in a way that they are not rotated. You can do this through a private browsing/incognito window.

If you want to provide yt-dlp with a logged-in session:

1. Open a new private browsing/incognito window and log into YouTube
2. Follow steps 1-4 above
3. Open a new tab and **close the YouTube tab**
4. Export cookies from the browser then **close the private browsing/incognito window**
5. Follow step 6 above (passing cookies with `--cookies`)